<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Sublime Text Plugin: StataEditor by sergiocorreia</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Sublime Text Plugin: StataEditor</h1>
        <h2>Sublime Text and Stata Integration</h2>
        <a href="https://github.com/sergiocorreia/StataEditor" class="button"><small>View project on</small> GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h1>
<a id="sublime-text-and-stata-integration" class="anchor" href="#sublime-text-and-stata-integration" aria-hidden="true"><span class="octicon octicon-link"></span></a>Sublime Text and Stata Integration</h1>

<p>StataEditor is a Sublime Text 3 plugin that integrates closely with Stata. It allows you to use Sublime Text's main features (syntax highlighting, autocompletion, snippets, build systems, goto symbols, etc.) interactively with Stata, so you can fully take advantage of the  Sublime Text workflow in Stata.</p>

<p><img src="https://raw.githubusercontent.com/sergiocorreia/StataEditor/gh-pages/screenshots/ExampleLarge.png?raw=True" alt="Example"></p>

<h2>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h2>

<h3>
<a id="requirements" class="anchor" href="#requirements" aria-hidden="true"><span class="octicon octicon-link"></span></a>Requirements</h3>

<ul>
<li>
<a href="http://www.stata.com/">Stata 13</a> (should work up to Stata 11)</li>
<li><a href="http://www.sublimetext.com/3">Sublime Text 3</a></li>
<li>Windows (it should be straightforward to add this for OSX using <a href="@andrewheiss">Andrew Heiss's</a> work; not sure about Linux)</li>
</ul>

<h3>
<a id="installation-1" class="anchor" href="#installation-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h3>

<ul>
<li>Install <a href="https://sublime.wbond.net/installation">Package Control</a> if not installed.</li>
<li>Install the Pywin32 package. Note: to install a package, go to the Command Palette in Sublime Text (ctrl+shift+p), type "install", type the package name, and select it.</li>
<li>Add this Github repository. Press ctrl+shift+p, type "add repo", and enter <a href="https://github.com/sergiocorreia/StataEditor">https://github.com/sergiocorreia/StataEditor</a>
</li>
<li>Install the StataEditor package.</li>
<li>(Optional) Set the Stata Path: ctrl+shift+p, type "stata path" (or use the Tools - Stata menu) and enter the path as seen in the image at the end. If this step is skipped, StataEditor will just try to find it, and ask if it fails.</li>
<li>(Optional) Register the <em>Stata Automation type library</em>: ctrl+shift+p, "stata register", and accept the Windows Prompt. In case of an error, see the <a href="http://www.stata.com/automation/#createmsapp">manual instructions</a>. If this step is skipped, StataEditor will try to run it when required.</li>
</ul>

<p><img src="https://raw.githubusercontent.com/sergiocorreia/StataEditor/gh-pages/screenshots/set-path.png?raw=True" alt="Stata Path"></p>

<h2>
<a id="using-stata" class="anchor" href="#using-stata" aria-hidden="true"><span class="octicon octicon-link"></span></a>Using Stata</h2>

<h3>
<a id="quick-overview" class="anchor" href="#quick-overview" aria-hidden="true"><span class="octicon octicon-link"></span></a>Quick Overview</h3>

<ul>
<li>Create a new file, and save it with a .do extension. This will activate the Stata syntax highlighting.</li>
<li>To run the do-file in Stata, press ctrl+b or go to Tools - Build</li>
<li>To use snippets, press Tab or Enter when it starts autocompleting. To see all snippets, type "snip:" in the Command Palette (ctrl+shift+p)</li>
<li>To set up autocompletion, type "auto" and then Tab. Then fill the dtapaths line with e.g. "C:/MyData/"</li>
<li>To insert a dataset name, press ctrl+space when in the correct line (e.g. in a use/merge/append/etc)</li>
<li>To insert a variable name, press ctrl+shift+space</li>
<li>To insert a header, type "head" and then tab. You can quickly jump to a header or program with the ctrl+r key ("goto symbol")</li>
</ul>

<h3>
<a id="syntax-highlighting" class="anchor" href="#syntax-highlighting" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax Highlighting</h3>

<p>To use the Stata package and syntax highlighting, you can either i) save the file as a Stata type (.do .ado .mata), ii) click on the lower right corner, or iii) type "syntax: stata" in the Command Palette</p>

<p><img src="https://raw.githubusercontent.com/sergiocorreia/StataEditor/gh-pages/screenshots/SyntaxSmall.png?raw=True" alt="Syntax Highlighting"></p>

<h3>
<a id="executing-code" class="anchor" href="#executing-code" aria-hidden="true"><span class="octicon octicon-link"></span></a>Executing Code</h3>

<p>To do or run the file, press ctrl+b (do) or ctrl+shift+b (run), or go to the Build menu. Note that <em>building</em> a file is the Sublime Text equivalent of <em>do</em> and <em>run</em> in Stata.</p>

<p><img src="https://raw.githubusercontent.com/sergiocorreia/StataEditor/gh-pages/screenshots/Build.png?raw=True" alt="Build Menu"></p>

<h3>
<a id="snippets" class="anchor" href="#snippets" aria-hidden="true"><span class="octicon octicon-link"></span></a>Snippets</h3>

<p>To use a snippet, just start writing it and then press Tab:</p>

<p><img src="https://raw.githubusercontent.com/sergiocorreia/StataEditor/gh-pages/screenshots/snippet-example.png?raw=True" alt="Snippet Example"></p>

<p>To see all available snippets, press "snip" in the Command Palette or go to Tools - Snippets.</p>

<p><img src="https://raw.githubusercontent.com/sergiocorreia/StataEditor/gh-pages/screenshots/snippet-palette.png?raw=True" alt="Snippet Palette"></p>

<p>Snippets are "intelligent" and allow to be completed in order, indicating variables, options, etc. Within a snippet, press Tab to go to the next value:</p>

<p><img src="https://raw.githubusercontent.com/sergiocorreia/StataEditor/gh-pages/screenshots/snippet-animation.gif?raw=True" alt="Snippet Animation"></p>

<h3>
<a id="go-to-symbol" class="anchor" href="#go-to-symbol" aria-hidden="true"><span class="octicon octicon-link"></span></a>Go To Symbol</h3>

<p>You can jump to different sections of the do-file with the ctrl+g shortcut. Currently, it recognizes program declarations and "header comments". To insert a header comment, use the "header" snippet (type "head", then Tab).</p>

<p><img src="https://raw.githubusercontent.com/sergiocorreia/StataEditor/gh-pages/screenshots/Goto.png?raw=True" alt="Goto"></p>

<p>Technical note: a header comment is just a line that starts with "// " (nothing before the slashes, and a space after them).</p>

<h3>
<a id="help" class="anchor" href="#help" aria-hidden="true"><span class="octicon octicon-link"></span></a>Help</h3>

<p>Pressing the F1 key will search for the help file of any selected word and try to open it in Sublime Text. Pressing shift+F1 will do the same but opening it in the Stata Viewer.</p>

<h3>
<a id="autocompletion" class="anchor" href="#autocompletion" aria-hidden="true"><span class="octicon octicon-link"></span></a>Autocompletion</h3>

<h4>
<a id="using-the-autocomplete-snippet" class="anchor" href="#using-the-autocomplete-snippet" aria-hidden="true"><span class="octicon octicon-link"></span></a>Using the Autocomplete Snippet</h4>

<ul>
<li>Save the file if it is still Untitled.</li>
<li>Use the "autocomplete" snippet ("auto", Tab) to insert the required comments.</li>
</ul>

<p><img src="https://raw.githubusercontent.com/sergiocorreia/StataEditor/gh-pages/screenshots/autocomplete-1.png?raw=True" alt="Autocomplete Snippet"></p>

<p><img src="https://raw.githubusercontent.com/sergiocorreia/StataEditor/gh-pages/screenshots/autocomplete-2.png?raw=True" alt="Autocomplete Snippet"></p>

<ul>
<li>Change the dtapaths line. Just type one or more folders followed by commas.</li>
</ul>

<p><img src="https://raw.githubusercontent.com/sergiocorreia/StataEditor/gh-pages/screenshots/autocomplete-3.png?raw=True" alt="Autocomplete Snippet"></p>

<p>The dtapaths line can be customizable:</p>

<ul>
<li>Paths can be absolute or relative to the do-file.</li>
<li>Multiple paths must be separated by commas.</li>
<li>Quotes are optional.</li>
<li>If the line is too long, you can use multiple lines; just start each line with "*! dtapaths: "</li>
<li>Nicknames: If in the code you have set something like <em>global TEST=C:/MyData/TestData</em>, which you then use in strings like "$TEST/SomeDataset" you can use a nickname to refer to a folder. For instance, <em>$TEST=C:/MyData/Final</em> instead of just <em>C:/MyData/Final</em>
</li>
</ul>

<p><img src="https://raw.githubusercontent.com/sergiocorreia/StataEditor/gh-pages/screenshots/autocomplete-4.png?raw=True" alt="Autocomplete Snippet"></p>

<h4>
<a id="dataset-autocompletion" class="anchor" href="#dataset-autocompletion" aria-hidden="true"><span class="octicon octicon-link"></span></a>Dataset Autocompletion</h4>

<p>Just press ctrl+space if you are in a line that has a "use" or "using" strings. If the Stata window was still closed, you may need to press it again. </p>

<p><img src="https://raw.githubusercontent.com/sergiocorreia/StataEditor/gh-pages/screenshots/dta.png?raw=True" alt="Dataset Autocompletion"></p>

<h4>
<a id="variable-autocompletion" class="anchor" href="#variable-autocompletion" aria-hidden="true"><span class="octicon octicon-link"></span></a>Variable Autocompletion</h4>

<p>Press ctrl+shift+space anywhere in the do file:</p>

<p><img src="https://raw.githubusercontent.com/sergiocorreia/StataEditor/gh-pages/screenshots/var-all.png?raw=True" alt="Variable Autocompletion - All"></p>

<p>Select all the variables that you want and press Esc to exit the menu.</p>

<p>The first option allows you to filter by dataset:</p>

<p><img src="https://raw.githubusercontent.com/sergiocorreia/StataEditor/gh-pages/screenshots/var-dta.png?raw=True" alt="Variable Autocompletion - Dta"></p>

<p>Notice the "(current)" dataset. It has all the variables generated with <em>gen</em> and <em>egen</em>, as well as the ones in the dataset currently open in Stata.</p>

<p><img src="https://raw.githubusercontent.com/sergiocorreia/StataEditor/gh-pages/screenshots/var-current.png?raw=True" alt="Variable Autocompletion - Current"></p>

<p>When filtering by a saved dataset, the variables that sort the dataset will be shown first and a * will be next to them:</p>

<p><img src="https://raw.githubusercontent.com/sergiocorreia/StataEditor/gh-pages/screenshots/var-filter.png?raw=True" alt="Variable Autocompletion - Filter"></p>

<h3>
<a id="example-autocompletion--snippets--fun" class="anchor" href="#example-autocompletion--snippets--fun" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example: Autocompletion + Snippets = Fun</h3>

<p>Select the <em>uselong</em> snippet</p>

<p><img src="https://raw.githubusercontent.com/sergiocorreia/StataEditor/gh-pages/screenshots/use-1.png?raw=True" alt="Use1"></p>

<p>It will move the caret exactly where you want.</p>

<p><img src="https://raw.githubusercontent.com/sergiocorreia/StataEditor/gh-pages/screenshots/use-2.png?raw=True" alt="Use2"></p>

<p>Now press ctrl+space, and select the dataset from the list of avaiable datasets</p>

<p><img src="https://raw.githubusercontent.com/sergiocorreia/StataEditor/gh-pages/screenshots/use-3.png?raw=True" alt="Use3"></p>

<p><img src="https://raw.githubusercontent.com/sergiocorreia/StataEditor/gh-pages/screenshots/use-4.png?raw=True" alt="Use4"></p>

<p>Now press Tab to move the caret to the varlist, and press ctrl+shift+space. Notice that the <em>using</em> dataset will be automatically selected!</p>

<p><img src="https://raw.githubusercontent.com/sergiocorreia/StataEditor/gh-pages/screenshots/use-5.png?raw=True" alt="Use5"></p>

<p>Add as many variables as you want. Remember that the ones prefixed by a * are sorting the data.</p>

<p><img src="https://raw.githubusercontent.com/sergiocorreia/StataEditor/gh-pages/screenshots/use-6.png?raw=True" alt="Use6"></p>

<h3>
<a id="available-commands" class="anchor" href="#available-commands" aria-hidden="true"><span class="octicon octicon-link"></span></a>Available Commands</h3>

<p>To see all available commands, you can either use the menu (Tools - Stata) or the Command Palette (ctrl+shift+p, then type "stata:"):</p>

<p><em>Menu Bar</em>
<img src="https://raw.githubusercontent.com/sergiocorreia/StataEditor/gh-pages/screenshots/Menu.png?raw=True" alt="Menu"></p>

<p><em>Command Palette</em>
<img src="https://raw.githubusercontent.com/sergiocorreia/StataEditor/gh-pages/screenshots/Palette.png?raw=True" alt="Palette"></p>

<h2>
<a id="known-issues-taken-from-mattias-readmemd" class="anchor" href="#known-issues-taken-from-mattias-readmemd" aria-hidden="true"><span class="octicon octicon-link"></span></a>Known issues (taken from Mattias' Readme.md)</h2>

<h3>
<a id="orphan-stata-window-after-closing" class="anchor" href="#orphan-stata-window-after-closing" aria-hidden="true"><span class="octicon octicon-link"></span></a>Orphan Stata Window After Closing</h3>

<p>The development of this package is still in beta and may contain bugs, so use at your own risk and make sure you backup your data. When running code from ST3, a new instance of Stata is opened. If you close ST3, then that instance will also close, though it may take around five minutes before that happens. Note that Stata will not ask you whether you want to save the data but will close without warning. <strong>Therefore, do not use an instance of Stata that has been launched from ST3 after ST3 has been closed, as you would risk loosing your unsaved work.</strong> This is true even if you re-launch ST3 as the connection to the old instance of Stata will have been permanently broken. Please let me know if you detect any other bugs or if you have requests for additional featuers. You can contact me at mnordin [at] gmx [dot] com.</p>

<h3>
<a id="encoding" class="anchor" href="#encoding" aria-hidden="true"><span class="octicon octicon-link"></span></a>Encoding</h3>

<p>If you write Stata code containing non-ASCII characters in ST3, you may notice that these characters have been replaced with nonsense when you open the file in Stata's native do-file editor. This is because Stata and ST3 use different encodings. To avoid this issue, you can save your file with a different encoding in ST3. To do so, open File -&gt; Save with encoding, and choose the appropriate encoding. Which encoding is right for you I would imagine depends on your Stata distribution. For most users in Europe and the U.S. you would probably get the correct result by choosing Western (Windows 1252). If that doesn't work, try saving with other encodings.</p>

<h2>
<a id="missing-features" class="anchor" href="#missing-features" aria-hidden="true"><span class="octicon octicon-link"></span></a>Missing Features</h2>

<ul>
<li>OSX Support (easy/medium)</li>
<li>Linux Support (hard?)</li>
<li>Allow variable autocompletion based on what has been currently typed (medium)</li>
<li>Fix "build when selecting". Currently every build expands the selected lines by one (hard)</li>
<li>Display message in red when sublime closes to warn anyone using the Stata window that it will be closed (very hard)</li>
<li>Interact with a remote Stata session via either Remote Desktop or an SSH Terminal (very hard)</li>
</ul>

<h2>
<a id="acknowledgements" class="anchor" href="#acknowledgements" aria-hidden="true"><span class="octicon octicon-link"></span></a>Acknowledgements</h2>

<p>This is a fork by <a href="@sergiocorreia">Sergio Correia</a> of the StataEditor project created by <a href="http://sites.google.com/site/econnordin/">Mattias Nordin</a>.</p>

<p>It is heavily influenced by several other projects:</p>

<ul>
<li>SublimeStataEnhanced by <a href="@andrewheiss">Andrew Heiss</a>
</li>
<li>The original TextMate plugin by Timothy Beatty, currently maintained by <a href="http://bylr.net/3/2010/10/stata-bundle-for-textmate/">Dan Byler</a>
</li>
</ul>

<p>Thanks to Adrian Adermon and Daniel Forchheimer for helpful suggestions.</p>

<p>Suggestions, code contributions, and pull requests <a href="mailto:sergio.correia@gmail.com">are greatly appreciated</a>!</p>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/sergiocorreia/StataEditor/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/sergiocorreia/StataEditor/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/sergiocorreia/StataEditor"></a> is maintained by <a href="https://github.com/sergiocorreia">sergiocorreia</a>.</p>

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

            <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-56468515-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>
